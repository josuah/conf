#!/bin/sh -eu

item=${1:?}

item=${item%/}
host=host/$(hostname -s)

[ -e "$item" ] || { echo>&2 "$item does not exist"; exit 1; }
touch "$host"
grep -Fxq "$item" "$host" && exec echo>&2 "$item already set for $host"

case $item in
(role/*|module/*)
	echo "$item" | sort -o "$host" "$host" -
	echo>&2 "added $item"
	;;
(*)
	echo "unknown configuration type"
	;;
esac
